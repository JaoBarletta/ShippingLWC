<template>
  <lightning-card title="Enviar Email com Arquivos">
    <div class="slds-p-around_small">
      <!-- SELECT de Template -->
      <lightning-combobox
        name="template"
        label="Email Template"
        options={templateOptions}
        value={selectedTemplate}
        onchange={handleTemplateChange}>
      </lightning-combobox>

      <!-- SELECT de Account -->
      <lightning-combobox
        name="account"
        label="Selecionar Account"
        options={accountOptions}
        value={selectedAccountId}
        onchange={handleAccountChange}>
      </lightning-combobox>

      <!-- SELECT de Contact -->
      <lightning-combobox
        name="contact"
        label="Selecionar Contact"
        options={contactOptions}
        value={selectedContactId}
        onchange={handleContactChange}>
      </lightning-combobox>

      <!-- INPUT de Assunto -->
      <lightning-input
        name="subject"
        label="Assunto (opcional)"
        value={subject}
        onchange={handleSubjectChange}>
      </lightning-input>

      <!-- RICH TEXT de Corpo -->
      <lightning-input-rich-text
        name="body"
        label="Corpo (opcional)"
        value={body}
        onchange={handleBodyChange}>
      </lightning-input-rich-text>

      <!-- UPLOAD de Arquivos -->
      <lightning-file-upload
        record-id={recordId}
        multiple
        label="Anexar arquivos ao Shipping"
        onuploadfinished={handleUploadFinished}>
      </lightning-file-upload>

      <!-- LISTAGEM dos arquivos vinculados -->
      <template if:true={fileOptions.length}>
        <lightning-checkbox-group
          name="files"
          label="Selecione os arquivos"
          options={fileOptions}
          value={selectedFileIds}
          onchange={handleFilesChange}>
        </lightning-checkbox-group>
      </template>
      <template if:true={noFilesMessage}>
        <p class="slds-text-body_small slds-m-top_small">
          {noFilesMessage}
        </p>
      </template>

      <!-- INPUT de E-mails Extras (CC) -->
      <lightning-input
        name="extraEmails"
        label="Emails Adicionais (separados por “;”)"
        value={extraEmails}
        onchange={handleExtraEmailsChange}>
      </lightning-input>

      <!-- BOTÃO para enviar -->
      <lightning-button
        class="slds-m-top_medium"
        variant="brand"
        label="Enviar Email"
        onclick={handleSendEmail}>
      </lightning-button>
    </div>
  </lightning-card>
</template>
